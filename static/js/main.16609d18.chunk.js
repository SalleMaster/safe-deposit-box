(this["webpackJsonpsafe-deposit-box"]=this["webpackJsonpsafe-deposit-box"]||[]).push([[0],{24:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),r=n.n(a),s=n(9),u=n.n(s),o=(n(24),n(3)),i=n(6),l=function(e){var t=e.password,n=function(e,t){var n=Object(a.useState)(!1),c=Object(i.a)(n,2),r=c[0],s=c[1],u=Object(o.c)((function(e){return e.safe})),l=u.locked,d=u.status;return Object(a.useEffect)((function(){s(!1);var e=setTimeout((function(){s(!0)}),t);return function(){return clearTimeout(e)}}),[e,l,d,t]),{idle:r,locked:l,status:d}}(t,5e3),r=n.idle,s=n.locked,u=n.status,l=function(e,t){var n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){e.length>t&&s("...".concat(e.slice(-t)))}),[e,t]),{shortText:r}}(t,11).shortText;return Object(c.jsxs)("div",{className:r?"screen":"screen screen--on",children:[Object(c.jsx)("div",{className:"screen__state",children:s?"Locked":"Unlocked"}),Object(c.jsx)("div",{className:"screen__message",children:t.length>11?l:t.length>0?t:u})]})},d=function(e){var t=e.onClickHandler,n=e.keys;return Object(c.jsx)("div",{className:"keypad",children:n.map((function(e,n){return Object(c.jsx)("button",{className:"keypad__btn",value:e,onClick:function(e){return t(e)},children:e},n)}))})},f=n(15),p=n(4),b=n.n(p),j=n(8),O="SAFE_SET_LOCK_REQUEST",E="SAFE_SET_LOCK_SUCCESS",v="SAFE_SET_LOCK_FAIL",y="SAFE_SET_LOCK_RESET",_="SAFE_UNLOCK_REQUEST",h="SAFE_UNLOCK_SUCCESS",k="SAFE_UNLOCK_FAIL",S="SAFE_UNLOCK_RESET",m="SAFE_SERVICE_MODE_ENABLE",x="SAFE_KEYPAD_LOCKED",L="SAFE_KEYPAD_UNLOCKED",C="SAFE_VALIDATE_CODE_REQUEST",A="SAFE_VALIDATE_CODE_SUCCESS",T="SAFE_VALIDATE_CODE_FAIL",g="SAFE_VALIDATE_CODE_RESET",w=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],r=n[1],s=Object(o.b)(),u=Object(o.c)((function(e){return e.safe})),l=u.locked,d=u.serviceMode,p=u.keypadLocked,w=function(e){var t;if(!p)if(d)r([].concat(Object(f.a)(c),[e]).join(""));else if("L"!==e||l){if("L"===e)return;r([].concat(Object(f.a)(c),[e]).join(""))}else s((t=c,function(){var e=Object(j.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n({type:x}),n({type:O}),t&&6===t.length&&"000000"!==t){e.next=5;break}throw new Error("Error");case 5:setTimeout((function(){n({type:E,payload:t}),n({type:L})}),3e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:v,payload:e.t0.message}),setTimeout((function(){n({type:y}),n({type:L})}),2e3);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),r([])},F=function(t){var n=t.key;"l"===n&&(n="L"),e.includes(n)&&w(n)};return Object(a.useEffect)((function(){return document.addEventListener("keydown",F),function(){return document.removeEventListener("keydown",F)}})),Object(a.useEffect)((function(){d||c.length>6&&r(c.slice(c.length-6,c.length));var e=setTimeout((function(){var e,t;l&&"000000"===c?(r([]),s(function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:m});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):0!==c.length&&!d&&l?(r([]),s((t=c,function(){var e=Object(j.a)(b.a.mark((function e(n,c){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n({type:x}),n({type:_}),a=c().safe.password,t===a){e.next=8;break}throw new Error("Error");case 8:setTimeout((function(){n({type:h})}),3e3);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),n({type:k,payload:e.t0.message}),setTimeout((function(){n({type:S}),n({type:L})}),2e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()))):0!==c.length&&d&&(r([]),s((e=c,function(){var t=Object(j.a)(b.a.mark((function t(n,c){var a,r,s,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:x}),n({type:C}),t.next=5,fetch("https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?code=".concat(e));case 5:return a=t.sent,t.next=8,a.json();case 8:if(r=t.sent,s=r.sn,u=c().safe.serialNumber,s===u){t.next=15;break}throw new Error("Error");case 15:n({type:A}),setTimeout((function(){n({type:h})}),3e3);case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),n({type:T,payload:t.t0.message}),setTimeout((function(){n({type:g}),n({type:L})}),2e3);case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,n){return t.apply(this,arguments)}}())))}),1200);return function(){return clearTimeout(e)}}),[c,l,s,r,d]),{onClickHandler:function(e){w(e.target.value)},keys:e,text:c}},F=function(){var e=["7","8","9","4","5","6","1","2","3","*","0","L"],t=Object(o.c)((function(e){return e.safe})).serialNumber,n=w(e),a=n.onClickHandler,r=n.text;return Object(c.jsxs)("div",{className:"safe",children:[Object(c.jsx)(l,{password:r}),Object(c.jsx)(d,{onClickHandler:a,keys:e}),Object(c.jsxs)("div",{className:"serial-number",children:["S/N: ",t]})]})},N=function(){return Object(c.jsx)(F,{})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},U=n(5),K=n(17),I=n(18),R=n(1),M={locked:!1,password:"",status:"Ready",serialNumber:4815162342,serviceMode:!1,keypadLocked:!1},V=Object(U.combineReducers)({safe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(R.a)(Object(R.a)({},e),{},{status:"Locking..."});case E:return Object(R.a)(Object(R.a)({},e),{},{locked:!0,status:"",password:t.payload});case v:return Object(R.a)(Object(R.a)({},e),{},{status:t.payload});case y:return M;case _:return Object(R.a)(Object(R.a)({},e),{},{status:"Unlocking..."});case h:return M;case k:return Object(R.a)(Object(R.a)({},e),{},{status:t.payload});case S:return Object(R.a)(Object(R.a)({},e),{},{status:""});case x:return Object(R.a)(Object(R.a)({},e),{},{keypadLocked:!0});case L:return Object(R.a)(Object(R.a)({},e),{},{keypadLocked:!1});case m:return Object(R.a)(Object(R.a)({},e),{},{serviceMode:!0,status:"Service"});case C:return Object(R.a)(Object(R.a)({},e),{},{status:"Validating..."});case A:return Object(R.a)(Object(R.a)({},e),{},{status:"Unlocking..."});case T:return Object(R.a)(Object(R.a)({},e),{},{status:t.payload});case g:return Object(R.a)(Object(R.a)({},e),{},{serviceMode:!1,status:""});default:return e}}}),H=[K.a],P=Object(U.createStore)(V,Object(I.composeWithDevTools)(U.applyMiddleware.apply(void 0,H)));u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(o.a,{store:P,children:Object(c.jsx)(N,{})})}),document.getElementById("root")),D()}},[[32,1,2]]]);
//# sourceMappingURL=main.16609d18.chunk.js.map